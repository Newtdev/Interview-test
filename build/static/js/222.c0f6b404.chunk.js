"use strict";(self.webpackChunkkrext=self.webpackChunkkrext||[]).push([[222],{48475:function(e,n,t){t.d(n,{T:function(){return N},p:function(){return I}});var a=t(74165),i=t(1413),o=t(15861),r=t(19787),s=t(20905),c=t(94157),l=t(81676),u=t(82101),d=t(22482),E=t(89907),v=t(3379),S=t(56615),m=t(71575),f=t(66902),p=t(25376),T=null,h=!1,I=s.Te.injectEndpoints({endpoints:function(e){return{subscribeToEvents:e.query({queryFn:function(e){return{data:null}},onCacheEntryAdded:function(e,n){return(0,o.Z)((0,a.Z)().mark((function t(){var o,s,N,g;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.cacheDataLoaded,s=n.cacheEntryRemoved,N=n.dispatch,t.prev=1,t.next=4,o;case 4:T&&T.connected||(T=(0,c.io)("https://api.krext.com/",{path:"/socket",query:{user_id:e.user_id}}),null===(g=T)||void 0===g||g.on("connect",(function(){var e;console.log("=========CONNECTION OPEN============"),h=!1,N((0,r.e5)(!1)),null===(e=T)||void 0===e||e.on("".concat(T.id),(function(e){(null===e||void 0===e?void 0:e.event)===u.vI.RESUME_MEETING_SESSION&&N((0,r.$n)(null===e||void 0===e?void 0:e.data))}))})),T.on(u.vI.START_MEETING_SESSION,(function(e){N((0,r.$n)(e))})),T.on(u.vJ.MEETING_STARTED,(function(e){N((0,r.$n)((0,i.Z)((0,i.Z)({},e),{},{duration:{hours:0,minutes:5,seconds:0}})))})),T.on(u.vI.MEETING_SESSION_BROADCAST,(function(e){var n,t;(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.event)===u.vJ.TANGENT?(N((0,r.ak)(!0)),setTimeout((function(){N((0,r.ak)(!1))}),4e3)):N((0,r.$n)(null===e||void 0===e?void 0:e.data))})),T.on(u.vI.MEETING_SESSION_RATINGS,(function(e){N((0,r.$n)(null===e||void 0===e?void 0:e.data))})),T.on(u.vI.MEETING_SESSION_MODULE_UPDATE,(function(e){var n;switch(console.log("Module Update Triggered"),console.log(null===e||void 0===e?void 0:e.data),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.event){case l.G9.ACTION_ITEM:S.h.dispatch(E.z.util.invalidateTags([{type:d.Z.ACTION_ITEM}]));break;case l.G9.ISSUE:S.h.dispatch(f.D.util.invalidateTags([{type:d.Z.ISSUES}]));break;case l.G9.GOAL:S.h.dispatch(v.j.util.invalidateTags([{type:d.Z.GOAL}]));break;case l.G9.HEADLINE:S.h.dispatch(m.P.util.invalidateTags([{type:d.Z.HEADLINES}]));break;case l.G9.METRIC:S.h.dispatch(p.t.util.invalidateTags([{type:d.Z.METRICS}]));break;default:console.log("Unknown mody")}})),T.on("disconnect",(function(){console.log("=========CONNECTION CLOSE============",h),N((0,r.e5)(!0)),N(I.util.resetApiState())}))),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.next=11,s;case 11:T&&T.connected&&T.disconnect();case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))()},invalidatesTags:[{type:d.Z.SOCKET}]})}},overrideExisting:!0}),N=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T&&T.connected){e.next=6;break}return console.log("Socket not connected or initialized, attempting to reconnect..."),e.next=4,I.endpoints.subscribeToEvents.initiate({});case 4:return e.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return T&&T.connected?(T.emit(n.channel,n.data,(function(){console.log("===Message Sent Successfully====")})),console.log("Message Sent.......",n.channel)):console.log("Socket not connected, message not sent."),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},2284:function(e,n,t){t.d(n,{A:function(){return l}});var a=t(1413),i=t(45987),o=t(78846),r=t(95765),s=t(46417),c=["data","placeholder","children","defaultValue","value","size","error"];function l(e){e.data;var n=e.placeholder,t=e.children,l=e.defaultValue,u=e.value,d=e.size,E=e.error,v=(0,i.Z)(e,c);return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)(o.Z,(0,a.Z)((0,a.Z)({fullWidth:!0,value:u,placeholder:n||"Placeholder",size:d||"small",className:"px-1 border rounded-md capitalize border-gray-dark text-gray-dark focus:border-primary-dark"},v),{},{children:[(0,s.jsx)(r.Z,{disabled:!0,value:"",children:(0,s.jsx)("em",{children:l})}),t]})),E&&(0,s.jsx)("span",{className:"text-error-dark text-[12px]",children:E})]})}},82101:function(e,n,t){t.d(n,{Po:function(){return o},vI:function(){return a},vJ:function(){return i}});var a=function(e){return e.CONNECTION="connection",e.DISCONNECT="disconnect",e.JOIN_MEETING_SESSION="join_meeting_session",e.START_MEETING_SESSION="start_meeting_session",e.RESUME_MEETING_SESSION="resume_meeting_session",e.MEETING_SESSION_BROADCAST="meeting_session_broadcast",e.MEETING_SESSION_MODULE_UPDATE="meeting_session_module_update",e.MEETING_SESSION_RATINGS="meeting_session_ratings",e}({}),i=function(e){return e.MEETING_STARTED="MEETING_STARTED",e.MEETING_ENDED="MEETING_ENDED",e.ACTION_ITEM="ACTION_ITEM",e.GOAL="GOAL",e.HEADLINE="HEADLINE",e.ISSUE="ISSUE",e.METRIC="METRIC",e.TANGENT="TANGENT",e.CHECK_INS="CHECK_INS",e.WRAP_UPS="WRAP_UPS",e}({}),o=function(e){return e.RATINGS="RATINGS",e}({})},55643:function(e,n,t){var a=t(47313),i=t(92059),o=t(19787);n.Z=function(){var e=(0,i.T)(),n=(0,i.C)((function(e){return e.global.websocketData})),t=(0,a.useCallback)((function(n){e((0,o.$n)(n))}),[e]),r=(0,a.useCallback)((function(n){e((0,o.Qd)(n))}),[e,n]);return{websocketData:n,updateWebSocketDataFlow:t,handleClearData:(0,a.useCallback)((function(){e((0,o.$n)({})),e((0,o.Qd)([]))}),[e]),updateWebSocketDataList:r}}},38241:function(e,n,t){t.d(n,{Z:function(){return G}});var a=t(4942),i=t(1413),o=t(29439),r=t(47313);var s=t.p+"static/media/Issue_icon.6194ab616ed392a5b4fc826a76057297.svg";var c=t.p+"static/media/Note.c4bfedf9ca198666ae4809f91e339574.svg";var l=t.p+"static/media/ActionItem_icon.b905a3db1f5fca2898933465ca471b4c.svg",u=t(61689),d=t(47131),E=t(50858),v=t(74460),S=t(74165),m=t(15861),f=t(79429),p=t(97931),T=t(21933),h=t(44922),I=t(31271),N=t(36059),g=t(71158),x=t(40628),b=t(96215),_=t(89907),A=t(46417);function Z(e){var n=e.show,t=e.handleToggleGoal,a=e.meeting,s=(0,h.Z)().workspace,c=(0,r.useState)([]),l=(0,o.Z)(c,2),u=(l[0],l[1],(0,x.Z)().organization.organization),d=((0,g.Z)().meeting_list,(0,I.Z)().toggleLoadingModal),E=_.z.useCreateActionItemsMutation(),v=(0,o.Z)(E,1)[0],Z=(0,f.TA)({initialValues:{note:"",meeting:null===a||void 0===a?void 0:a.meeting},validateOnChange:!0,validateOnBlur:!0,validationSchema:T.Ry().shape({note:T.Z_().label("Action Item title").required()}),onSubmit:function(){var e=(0,m.Z)((0,S.Z)().mark((function e(n){var a,o;return(0,S.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,v((0,i.Z)((0,i.Z)({},n),{},{organization:null===u||void 0===u?void 0:u._id,workspace:null===s||void 0===s?void 0:s.id})).unwrap();case 4:a=e.sent,t(),N.ZP.success(null===a||void 0===a?void 0:a.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),d(!1),N.ZP.error(null===e.t0||void 0===e.t0||null===(o=e.t0.data)||void 0===o?void 0:o.message);case 13:d(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}()});return(0,A.jsx)("section",{children:(0,A.jsx)("article",{children:(0,A.jsx)(b.Z,{open:n,name:"Create Notes",handleToggleDrawer:t,children:(0,A.jsx)("div",{className:"px-4",children:(0,A.jsxs)("form",{onSubmit:Z.handleSubmit,children:[(0,A.jsx)("div",{className:"h-full mt-4 overflow-hidden ",children:(0,A.jsx)(p.ML,{handleChange:function(e){return Z.setFieldValue("details",e.replace(/<[^>]*>/g,""))},className:"w-full h-40",placeholder:"Notes...."})}),(0,A.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,A.jsx)("button",{type:"button",onClick:t,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,A.jsx)("button",{disabled:!Z.isValid,type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Submit"})]})]})})})})})}var k=t(55643),C=t(82101),y={showEditGoal:!1,actionItem:!1,issue:!1,note:!1},G=function(e){var n,t,S=e.data,m=e.item,f=(0,r.useState)(y),p=(0,o.Z)(f,2),T=p[0],h=p[1],I=(0,r.useState)({}),N=(0,o.Z)(I,2),g=N[0],x=N[1],b=(0,k.Z)(),_=(b.updateWebSocketDataFlow,b.websocketData);function G(e){return function(){x((function(){return m})),h((function(n){return(0,i.Z)((0,i.Z)({},n),{},(0,a.Z)({},e,!n[e]))}))}}return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"flex items-center px-2",onClick:function(e){return e.stopPropagation()},children:[(0,A.jsx)(u.Z,{title:"Add action item",children:(0,A.jsx)(d.Z,{onClick:G("actionItem"),children:(0,A.jsx)("img",{src:l,alt:"action item"})})}),(0,A.jsx)(u.Z,{title:"Add issues",children:(0,A.jsx)(d.Z,{onClick:G("issue"),children:(0,A.jsx)("img",{src:s,alt:"action item"})})}),(0,A.jsx)(u.Z,{title:"Add notes",children:(0,A.jsx)(d.Z,{onClick:G("note"),children:(0,A.jsx)("img",{src:c,alt:"action item"})})})]}),T.actionItem?(0,A.jsx)(E.Z,{show:T.actionItem,handleToggleGoal:G("actionItem"),meeting:S,parent:g,item:(null===_||void 0===_||null===(n=_.data)||void 0===n?void 0:n.event)!==C.vJ.ACTION_ITEM?g:{}}):null,T.issue?(0,A.jsx)(v.Z,{show:T.issue,handleToggleGoal:G("issue"),meeting:S,item:(null===_||void 0===_||null===(t=_.data)||void 0===t?void 0:t.event)!==C.vJ.ISSUE?g:{}}):null,T.note?(0,A.jsx)(Z,{show:T.note,handleToggleGoal:G("note"),meeting:S}):null]})}},71575:function(e,n,t){t.d(n,{P:function(){return c}});var a=t(45987),i=t(20905),o=t(84537),r=t(22482),s=["id"],c=i.Te.injectEndpoints({endpoints:function(e){return{createHeadlines:e.mutation({query:function(e){return{url:o.A.HEADLINES,method:"POST",body:e}},invalidatesTags:[{type:r.Z.HEADLINES},{type:r.Z.MEETINGS}]}),updateHeadline:e.mutation({query:function(e){var n=e.id,t=(0,a.Z)(e,s);return{url:"".concat(o.A.HEADLINES,"/").concat(n),method:"PATCH",body:t}},invalidatesTags:[{type:r.Z.HEADLINES},{type:r.Z.MEETINGS}]}),deleteHeadline:e.mutation({query:function(e){return{url:"".concat(o.A.HEADLINES,"/").concat(e),method:"DELETE"}},invalidatesTags:[{type:r.Z.HEADLINES}]}),getAllHeadlines:e.query({query:function(e){return{url:"".concat(o.A.HEADLINES),method:"GET",params:e}},providesTags:[{type:r.Z.HEADLINES}]})}}})}}]);