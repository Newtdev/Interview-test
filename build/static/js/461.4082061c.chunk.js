"use strict";(self.webpackChunkkrext=self.webpackChunkkrext||[]).push([[461],{82559:function(e,n,t){t(47313);n.Z=t.p+"static/media/DeleteIcon.e4db93268cd0cbc1b065b6a25fd47ad1.svg"},34380:function(e,n,t){t(47313);n.Z=t.p+"static/media/Pen.8605ded769202e6044fec716721e2ede.svg"},48475:function(e,n,t){t.d(n,{T:function(){return x},p:function(){return S}});var i=t(74165),r=t(1413),o=t(15861),a=t(19787),l=t(20905),d=t(94157),s=t(81676),u=t(82101),c=t(22482),v=t(89907),E=t(3379),f=t(56615),h=t(71575),m=t(66902),p=t(25376),g=null,N=!1,S=l.Te.injectEndpoints({endpoints:function(e){return{subscribeToEvents:e.query({queryFn:function(e){return{data:null}},onCacheEntryAdded:function(e,n){return(0,o.Z)((0,i.Z)().mark((function t(){var o,l,x,T;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.cacheDataLoaded,l=n.cacheEntryRemoved,x=n.dispatch,t.prev=1,t.next=4,o;case 4:g&&g.connected||(g=(0,d.io)("https://api.krext.com/",{path:"/socket",query:{user_id:e.user_id}}),null===(T=g)||void 0===T||T.on("connect",(function(){var e;console.log("=========CONNECTION OPEN============"),N=!1,x((0,a.e5)(!1)),null===(e=g)||void 0===e||e.on("".concat(g.id),(function(e){(null===e||void 0===e?void 0:e.event)===u.vI.RESUME_MEETING_SESSION&&x((0,a.$n)(null===e||void 0===e?void 0:e.data))}))})),g.on(u.vI.START_MEETING_SESSION,(function(e){x((0,a.$n)(e))})),g.on(u.vJ.MEETING_STARTED,(function(e){x((0,a.$n)((0,r.Z)((0,r.Z)({},e),{},{duration:{hours:0,minutes:5,seconds:0}})))})),g.on(u.vI.MEETING_SESSION_BROADCAST,(function(e){var n,t;(null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.data)||void 0===t?void 0:t.event)===u.vJ.TANGENT?(x((0,a.ak)(!0)),setTimeout((function(){x((0,a.ak)(!1))}),4e3)):x((0,a.$n)(null===e||void 0===e?void 0:e.data))})),g.on(u.vI.MEETING_SESSION_RATINGS,(function(e){x((0,a.$n)(null===e||void 0===e?void 0:e.data))})),g.on(u.vI.MEETING_SESSION_MODULE_UPDATE,(function(e){var n;switch(console.log("Module Update Triggered"),console.log(null===e||void 0===e?void 0:e.data),null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.event){case s.G9.ACTION_ITEM:f.h.dispatch(v.z.util.invalidateTags([{type:c.Z.ACTION_ITEM}]));break;case s.G9.ISSUE:f.h.dispatch(m.D.util.invalidateTags([{type:c.Z.ISSUES}]));break;case s.G9.GOAL:f.h.dispatch(E.j.util.invalidateTags([{type:c.Z.GOAL}]));break;case s.G9.HEADLINE:f.h.dispatch(h.P.util.invalidateTags([{type:c.Z.HEADLINES}]));break;case s.G9.METRIC:f.h.dispatch(p.t.util.invalidateTags([{type:c.Z.METRICS}]));break;default:console.log("Unknown mody")}})),g.on("disconnect",(function(){console.log("=========CONNECTION CLOSE============",N),x((0,a.e5)(!0)),x(S.util.resetApiState())}))),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:return t.next=11,l;case 11:g&&g.connected&&g.disconnect();case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))()},invalidatesTags:[{type:c.Z.SOCKET}]})}},overrideExisting:!0}),x=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g&&g.connected){e.next=6;break}return console.log("Socket not connected or initialized, attempting to reconnect..."),e.next=4,S.endpoints.subscribeToEvents.initiate({});case 4:return e.next=6,new Promise((function(e){return setTimeout(e,1e3)}));case 6:return g&&g.connected?(g.emit(n.channel,n.data,(function(){console.log("===Message Sent Successfully====")})),console.log("Message Sent.......",n.channel)):console.log("Socket not connected, message not sent."),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},82101:function(e,n,t){t.d(n,{Po:function(){return o},vI:function(){return i},vJ:function(){return r}});var i=function(e){return e.CONNECTION="connection",e.DISCONNECT="disconnect",e.JOIN_MEETING_SESSION="join_meeting_session",e.START_MEETING_SESSION="start_meeting_session",e.RESUME_MEETING_SESSION="resume_meeting_session",e.MEETING_SESSION_BROADCAST="meeting_session_broadcast",e.MEETING_SESSION_MODULE_UPDATE="meeting_session_module_update",e.MEETING_SESSION_RATINGS="meeting_session_ratings",e}({}),r=function(e){return e.MEETING_STARTED="MEETING_STARTED",e.MEETING_ENDED="MEETING_ENDED",e.ACTION_ITEM="ACTION_ITEM",e.GOAL="GOAL",e.HEADLINE="HEADLINE",e.ISSUE="ISSUE",e.METRIC="METRIC",e.TANGENT="TANGENT",e.CHECK_INS="CHECK_INS",e.WRAP_UPS="WRAP_UPS",e}({}),o=function(e){return e.RATINGS="RATINGS",e}({})},6524:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(46417);function r(e){var n=e.name,t=e.children,r=e.options;return(0,i.jsxs)("div",{className:"w-full px-6 pb-4 bg-white shadow h-fit rounded-2xl",children:[(0,i.jsxs)("div",{className:"flex flex-row justify-between items-center py-6 text-base font-bold border-b",children:[(0,i.jsx)("h4",{children:n}),(0,i.jsx)("div",{children:r})]}),t]})}},79698:function(e,n,t){t.d(n,{Z:function(){return _}});var i=t(74165),r=t(1413),o=t(15861),a=t(29439),l=t(79429),d=t(97931),s=t(27356),u=t(57406),c=t(21933),v=t(31271),E=t(36059),f=t(96215),h=t(71575),m=t(48475),p=t(82101),g=t(40086),N=t(61171),S=t(47313),x=t(81676),T=t(35925),I=t(46417);function _(e){var n,t,_=e.show,b=e.handleToggleGoal,y=e.itemData,Z=e.header,A=void 0===Z?"Update Headlines":Z,M=e.hidButtons,j=void 0!==M&&M,D=(0,g.Z)().user,G=(0,v.Z)().toggleLoadingModal,O=h.P.useUpdateHeadlineMutation(),w=(0,a.Z)(O,1)[0],C=N.W.useUserMeetingsQuery({}),k=(0,S.useMemo)((function(){var e;return null===C||void 0===C||null===(e=C.data)||void 0===e?void 0:e.data}),[C]),L=(0,l.TA)({initialValues:{title:null===y||void 0===y?void 0:y.title,details:null===y||void 0===y?void 0:y.details,meeting:(null===y||void 0===y||null===(n=y.meeting)||void 0===n?void 0:n._id)||""},validateOnChange:!0,validateOnBlur:!0,validationSchema:c.Ry().shape({title:c.Z_().label(" Title").required(),details:c.Z_().label("Details").optional(),meeting:c.Z_().label("Meeting").required()}),onSubmit:function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n){var t,o,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,w((0,r.Z)((0,r.Z)({},n),{},{status:"ARCHIVED",id:null===y||void 0===y?void 0:y.id})).unwrap();case 4:o=e.sent,b(),E.ZP.success(null===o||void 0===o?void 0:o.message),(0,m.T)({channel:p.vI.MEETING_SESSION_MODULE_UPDATE,data:{event:x.G9.HEADLINE,user_id:null===D||void 0===D?void 0:D.id,room_name:null===y||void 0===y||null===(t=y.meeting)||void 0===t?void 0:t._id}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),G(!1),E.ZP.error(null===e.t0||void 0===e.t0||null===(a=e.t0.data)||void 0===a?void 0:a.message);case 14:G(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}()});return(0,I.jsx)("section",{children:(0,I.jsx)("article",{children:(0,I.jsx)(f.Z,{open:_,name:A,handleToggleDrawer:b,children:(0,I.jsx)("div",{className:"px-4",children:(0,I.jsxs)("form",{onSubmit:L.handleSubmit,children:[(0,I.jsx)("div",{children:(0,I.jsx)(s.Z,(0,r.Z)({type:"text",placeholder:"Enter title"},(0,u.PW)(L,"title")))}),(0,I.jsx)("div",{className:"h-full mt-4 overflow-hidden ",children:(0,I.jsx)(d.ML,{value:null===(t=L.values)||void 0===t?void 0:t.details,handleChange:function(e){return L.setFieldValue("details",e.replace(/<[^>]*>/g,""))},className:"w-full h-40",placeholder:"Goal details...."})}),(0,I.jsx)("div",{className:"grid content-center grid-cols-2 my-4 mt-6 gap-x-4",children:(0,I.jsx)(T.Z,{loading:null===C||void 0===C?void 0:C.isLoading,error:null===C||void 0===C?void 0:C.isError,onReload:C.refetch,children:function(){var e,n;return(0,I.jsxs)("div",{className:"relative ",children:[(0,I.jsx)("span",{className:"text-gray-400 text-[10px] absolute ml-4 mt-1",children:"Meeting"}),(0,I.jsx)("select",(0,r.Z)((0,r.Z)({className:"w-full p-4 border border-black rounded-md",placeholder:"Meeting",value:null===(e=L.values)||void 0===e?void 0:e.meeting},(0,u.PW)(L,"meeting")),{},{children:null===k||void 0===k?void 0:k.map((function(e){return(0,I.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.title},null===e||void 0===e?void 0:e._id)}))})),null!==L&&void 0!==L&&null!==(n=L.errors)&&void 0!==n&&n.meeting?(0,I.jsx)("span",{className:"text-[10px] text-error",children:L.errors.meeting}):null]})}})}),j?(0,I.jsx)("button",{type:"button",onClick:b,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Close"}):(0,I.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,I.jsx)("button",{type:"button",onClick:b,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,I.jsx)("button",{disabled:!L.isValid,type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Submit"})]})]})})})})})}},71575:function(e,n,t){t.d(n,{P:function(){return d}});var i=t(45987),r=t(20905),o=t(84537),a=t(22482),l=["id"],d=r.Te.injectEndpoints({endpoints:function(e){return{createHeadlines:e.mutation({query:function(e){return{url:o.A.HEADLINES,method:"POST",body:e}},invalidatesTags:[{type:a.Z.HEADLINES},{type:a.Z.MEETINGS}]}),updateHeadline:e.mutation({query:function(e){var n=e.id,t=(0,i.Z)(e,l);return{url:"".concat(o.A.HEADLINES,"/").concat(n),method:"PATCH",body:t}},invalidatesTags:[{type:a.Z.HEADLINES},{type:a.Z.MEETINGS}]}),deleteHeadline:e.mutation({query:function(e){return{url:"".concat(o.A.HEADLINES,"/").concat(e),method:"DELETE"}},invalidatesTags:[{type:a.Z.HEADLINES}]}),getAllHeadlines:e.query({query:function(e){return{url:"".concat(o.A.HEADLINES),method:"GET",params:e}},providesTags:[{type:a.Z.HEADLINES}]})}}})},32156:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var i=t(74165),r=t(15861),o=t(29439),a=t(47313),l=t(45798),d=t(60386),s=t(63585),u=t(47131),c=t(31271),v=t(6524),E=t(40628),f=t(89434),h=t(71575),m=t(82559),p=t(34380),g=t(68859),N=t(36059),S=t(79698),x=t(40086),T=t(46417);function I(e){e.meetingInfo;var n=(0,a.useState)(!1),t=(0,o.Z)(n,2),I=t[0],_=t[1],b=(0,c.Z)().toggleLoadingModal,y=(0,x.Z)().user,Z=(0,E.Z)().organization.organization,A=(0,a.useState)(!1),M=(0,o.Z)(A,2),j=M[0],D=M[1],G=(0,a.useRef)(),O=h.P.useDeleteHeadlineMutation(),w=(0,o.Z)(O,1)[0],C=(0,a.useMemo)((function(){return[{header:"Reporter",accessorKey:"created_by.bio.data.email",cell:function(e){var n,t,i,r,o,a,l,d,u=e.row;return(0,T.jsxs)("div",{className:"flex items-center gap-x-2  w-64 pr-4",children:[(0,T.jsx)(s.Z,{src:null===u||void 0===u||null===(n=u.original)||void 0===n||null===(t=n.created_by)||void 0===t?void 0:t.profile_picture,sx:{height:36,width:36}}),(0,T.jsxs)("h5",{className:"text-base font-normal leading-6",children:[null===u||void 0===u||null===(i=u.original)||void 0===i||null===(r=i.created_by)||void 0===r||null===(o=r.bio_data)||void 0===o?void 0:o.first_name," ",null===u||void 0===u||null===(a=u.original)||void 0===a||null===(l=a.created_by)||void 0===l||null===(d=l.bio_data)||void 0===d?void 0:d.last_name]})]})}},{header:"Title",accessorKey:"title"},{header:"Details",accessorKey:"details"},{header:"Created On",accessorKey:"created_at",accessorFn:function(e){return(0,f.default)(new Date(null===e||void 0===e?void 0:e.created_at),"dd/MM/yyyy")}},{header:"",accessorKey:"button",cell:function(e){var n=e.row;return(0,T.jsxs)("div",{className:"flex justify-evenly",children:[(0,T.jsx)(u.Z,{onClick:function(){return k(null===n||void 0===n?void 0:n.original)},children:(0,T.jsx)("img",{src:p.Z,alt:""})}),(0,T.jsx)(u.Z,{onClick:function(){return L(null===n||void 0===n?void 0:n.original)},children:(0,T.jsx)("img",{src:m.Z,alt:""})})]})}}]}),[]);function k(e){D((function(e){return!e})),G.current=e}function L(e){_((function(e){return!e})),G.current=e}var H=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(n){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(),b(!0),e.prev=2,e.next=5,w(n.id).unwrap();case 5:t=e.sent,N.ZP.success(null===t||void 0===t?void 0:t.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),N.ZP.error(null===e.t0||void 0===e.t0?void 0:e.t0.message);case 12:b(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(n){return e.apply(this,arguments)}}(),R=h.P.useGetAllHeadlinesQuery({created_by:null===y||void 0===y?void 0:y.id,organization:null===Z||void 0===Z?void 0:Z._id}),P=(0,a.useMemo)((function(){var e;return null===R||void 0===R||null===(e=R.currentData)||void 0===e?void 0:e.data}),[R]),U=(0,d.Z)({columns:C,data:P});return(0,T.jsxs)("section",{className:"w-full ",children:[(0,T.jsx)(g.Z,{header:"Delete",description:"Are you sure you want to delete this headline?",isOpen:I,closeModal:function(){L()},handleAction:function(){H(null===G||void 0===G?void 0:G.current)}}),(0,T.jsx)(v.Z,{name:"Headlines",children:(0,T.jsx)("div",{className:"w-full",children:(0,T.jsx)(l.Z,{instance:U,loading:R.isFetching,error:R.isError,onRetry:R.refetch})})}),j?(0,T.jsx)(S.Z,{show:j,handleToggleGoal:k,itemData:G.current}):null]})}}}]);