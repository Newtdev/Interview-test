"use strict";(self.webpackChunkkrext=self.webpackChunkkrext||[]).push([[1628],{91771:function(e,l,t){t(47313);l.Z=t.p+"static/media/MilestonesCompleted.1efd6ec686fe3ebffa6f0fa3b395cc17.svg"},66838:function(e,l,t){t.d(l,{s:function(){return n}});var i=t(30625),a=t(46417),n=function(e){var l=e.children;return e.isLoading?(0,a.jsx)("div",{className:"flex items-center justify-center ",children:(0,a.jsx)(i.Z,{})}):(0,a.jsx)("div",{children:l})}},18754:function(e,l,t){t(47313);var i=t(41467),a=t(63318),n=t(46417);l.Z=function(e){var l=e.normalizedGoalStatusEnum,t=e.milestoneWithPercentage,s=(0,i.Z)((function(e){return{root:{display:"flex",alignItems:"center",size:"medium",color:l.colorText||"#000000"},rail:{height:4,color:"dark"===e.palette.type?l.colorText:l.colcorText},track:{height:4,color:(e.palette.type,l.colorText)},thumb:{color:(e.palette.type,l.colorText),border:"6px solid currentColor",marginTop:"auto",marginBottom:"auto"}}}))(a.ZP);return(0,n.jsx)(s,{"aria-labelledby":"track-false-range-slider",defaultValue:t,valueLabelDisplay:"auto",track:"normal",disabled:!0,valueLabelFormat:function(e){return"".concat(e,"%")},size:"medium"})}},38707:function(e,l,t){t.d(l,{Z:function(){return G}});var i=t(93433),a=t(74165),n=t(1413),s=t(15861),d=t(29439),o=t(47313),r=t(79429),u=t(97931),c=t(27356),v=t(57406),m=t(21933),p=t(8094),x=t(44758),h=t(47131),g=t(44922),f=t(81676),j=t(57864),_=t(31271),b=t(36059),y=t(40628),Z=t(3379),N=t(96215),w=t(82101),T=t(48475),D=t(40086),F=t(61171),A=t(35925),S=t(46417);function G(e){var l,t,G,E,k,I,C,V,M,O,P,L,q,U=e.show,W=e.handleToggleGoal,z=e.itemData,R=(0,g.Z)().workspace,B=(0,D.Z)().user,K=(0,y.Z)().organization.organization,Q=(0,_.Z)().toggleLoadingModal,X=Z.j.useUpdateGoalMutation(),H=(0,d.Z)(X,1)[0],J=(0,r.TA)({initialValues:{title:null===z||void 0===z?void 0:z.title,details:null===z||void 0===z?void 0:z.details,due_date:new Date(null===z||void 0===z?void 0:z.due_date),start_date:new Date(null===z||void 0===z?void 0:z.start_date),assignee:(null===z||void 0===z||null===(l=z.assignee)||void 0===l?void 0:l._id)||"",goal_type:null===z||void 0===z?void 0:z.goal_type,status:(null===z||void 0===z?void 0:z.status)||"PENDING",milestones:null===z||void 0===z?void 0:z.milestones,meeting:null===z||void 0===z||null===(t=z.meeting)||void 0===t?void 0:t._id},validateOnChange:!0,validateOnBlur:!0,validationSchema:m.Ry().shape({title:m.Z_().label("Goal title").required(),details:m.Z_().label("Goal details").optional(),assignee:m.Z_().label("Assignee").required("Select Assignee"),due_date:m.Z_().label("Due date").required(),goal_type:m.Z_().label("Goal Type").required(),status:m.Z_().label("Goal status").required(),milestones:m.IX().of(m.Ry().shape({name:m.Z_().required(),due_date:m.hT().transform((function(e){return new Date(e)})),is_completed:m.O7().optional()})).optional().min(1,"At least one milestone")}),onSubmit:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(l){var t,i,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q(!0),e.prev=1,e.next=4,H((0,n.Z)((0,n.Z)({},l),{},{id:null===z||void 0===z?void 0:z.id,organization:null===K||void 0===K?void 0:K._id,workspace:null===R||void 0===R?void 0:R.id})).unwrap();case 4:i=e.sent,W(),b.ZP.success(null===i||void 0===i?void 0:i.message),(0,T.T)({channel:w.vI.MEETING_SESSION_MODULE_UPDATE,data:{event:f.G9.GOAL,user_id:null===B||void 0===B?void 0:B.id,room_name:null===z||void 0===z||null===(t=z.meeting)||void 0===t?void 0:t._id}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Q(!1),b.ZP.error(null===e.t0||void 0===e.t0||null===(s=e.t0.data)||void 0===s?void 0:s.message);case 14:Q(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(l){return e.apply(this,arguments)}}()}),Y=F.W.useUserMeetingsQuery({}),$=(0,o.useMemo)((function(){var e;return null===Y||void 0===Y||null===(e=Y.data)||void 0===e?void 0:e.data}),[Y]);return(0,S.jsx)("section",{children:(0,S.jsx)("article",{children:(0,S.jsx)(N.Z,{open:U,name:(null===z||void 0===z?void 0:z.title)||"Update Goal",handleToggleDrawer:W,children:(0,S.jsx)("div",{className:"px-4",children:(0,S.jsxs)("form",{onSubmit:J.handleSubmit,children:[(0,S.jsx)("div",{children:(0,S.jsx)(c.Z,(0,n.Z)({type:"text",placeholder:"Enter title"},(0,v.PW)(J,"title")))}),(0,S.jsx)("div",{className:"h-full mt-4 overflow-hidden ",children:(0,S.jsx)(u.ML,{value:null===(G=J.values)||void 0===G?void 0:G.details,handleChange:function(e){return J.setFieldValue("details",e.replace(/<[^>]*>/g,""))},className:"w-full h-40",placeholder:"Goal description...."})}),(0,S.jsxs)("div",{className:"grid w-full grid-cols-2 gap-4 py-4",children:[(0,S.jsx)(p.Z,{selected:J.values.start_date,placeholder:"Goal Start date",onSelect:function(e){return J.setFieldValue("start_date",e)},error:J.errors.start_date}),(0,S.jsx)(p.Z,{selected:J.values.due_date,placeholder:"Goal Due date",onSelect:function(e){return J.setFieldValue("due_date",e)},error:J.errors.due_date})]}),(0,S.jsxs)("div",{className:"grid content-center grid-cols-2 my-4 gap-x-4",children:[(0,S.jsx)(A.Z,{loading:null===Y||void 0===Y?void 0:Y.isLoading,error:null===Y||void 0===Y?void 0:Y.isError,onReload:Y.refetch,children:function(){var e,l;return(0,S.jsxs)("div",{className:"relative ",children:[(0,S.jsx)("span",{className:"text-gray-400 text-[10px] absolute ml-4 mt-1",children:"Meeting"}),(0,S.jsx)("select",(0,n.Z)((0,n.Z)({className:"w-full p-4 border border-black rounded-md",placeholder:"Meeting",value:null===(e=J.values)||void 0===e?void 0:e.meeting},(0,v.PW)(J,"meeting")),{},{children:null===$||void 0===$?void 0:$.map((function(e){return(0,S.jsx)("option",{value:null===e||void 0===e?void 0:e._id,children:null===e||void 0===e?void 0:e.title},null===e||void 0===e?void 0:e._id)}))})),null!==J&&void 0!==J&&null!==(l=J.errors)&&void 0!==l&&l.meeting?(0,S.jsx)("span",{className:"text-[10px] text-error",children:J.errors.meeting}):null]})}}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)("span",{className:"text-gray-400 text-[10px] absolute ml-4 mt-1",children:"Assignee"}),(0,S.jsx)("select",(0,n.Z)((0,n.Z)({className:"w-full p-4 border border-black rounded-md",placeholder:"Assignee",value:null===(E=J.values)||void 0===E?void 0:E.assignee},(0,v.PW)(J,"assignee")),{},{children:null===R||void 0===R||null===(k=R.users)||void 0===k?void 0:k.map((function(e){var l,t;return(0,S.jsx)("option",{value:null===e||void 0===e||null===(l=e.user)||void 0===l?void 0:l._id,children:null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.email},null===e||void 0===e?void 0:e.id)}))})),null!==J&&void 0!==J&&null!==(I=J.errors)&&void 0!==I&&I.assignee?(0,S.jsx)("span",{className:"text-[10px] text-error",children:J.errors.assignee}):null]})]}),(0,S.jsxs)("div",{className:"grid content-center grid-cols-2 gap-x-4",children:[(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)("span",{className:"text-gray-400 text-[10px] absolute ml-4 mt-1",children:"Goal Type"}),(0,S.jsx)("select",(0,n.Z)((0,n.Z)({className:"w-full p-4 border border-black rounded-md",placeholder:"Goal Type",value:null===(C=J.values)||void 0===C?void 0:C.goal_type},(0,v.PW)(J,"goal_type")),{},{children:(0,S.jsx)("option",{value:f.P.INDIVIDUAL,children:"Individual"})})),null!==J&&void 0!==J&&null!==(V=J.errors)&&void 0!==V&&V.goal_type?(0,S.jsx)("span",{className:"text-[10px] text-error",children:J.errors.goal_type}):null]}),(0,S.jsxs)("div",{className:"relative",children:[(0,S.jsx)("span",{className:"text-gray-400 text-[10px] absolute ml-4 mt-1",children:"Goal Status"}),(0,S.jsx)("select",(0,n.Z)((0,n.Z)({className:"w-full p-4 border border-black rounded-md",placeholder:"Goal Status",value:null===(M=J.values)||void 0===M?void 0:M.status,default:null===(O=J.values)||void 0===O?void 0:O.status},(0,v.PW)(J,"status")),{},{children:Object.values(f._O).map((function(e){return(0,S.jsx)("option",{value:e,children:(0,v.fm)(null===e||void 0===e?void 0:e.replace("_"," "))})}))})),null!==J&&void 0!==J&&null!==(P=J.errors)&&void 0!==P&&P.status?(0,S.jsx)("span",{className:"text-[10px] text-error",children:J.errors.status}):null]})]}),(0,S.jsxs)("div",{className:"mt-4",children:[(0,S.jsx)("label",{htmlFor:"Milestones",children:"Milestones"}),(0,S.jsxs)("div",{className:"py-4 ",children:[null===(L=J.values)||void 0===L||null===(q=L.milestones)||void 0===q?void 0:q.map((function(e,l){var t,a;return(0,S.jsxs)("div",{className:"grid grid-cols-2 mb-2 gap-x-4",children:[(0,S.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,S.jsx)(x.Z,(0,n.Z)({checked:null===(t=J.values)||void 0===t||null===(a=t.milestones[l])||void 0===a?void 0:a.is_completed},(0,v.PW)(J,"milestones.".concat([l],".is_completed")))),(0,S.jsx)(c.Z,(0,n.Z)({showBreak:!1,type:"text",placeholder:"Enter title"},(0,v.PW)(J,"milestones.".concat([l],".name"))))]}),(0,S.jsxs)("div",{className:"flex items-center w-full",children:[(0,S.jsx)(p.Z,{selected:new Date(J.values.milestones[l].due_date),placeholder:"Due date",onSelect:function(e){return J.setFieldValue("milestones.".concat([l],".due_date"),e)}}),(0,S.jsx)(h.Z,{children:(0,S.jsx)(j.SV5,{className:"text-red-600",onClick:function(){return function(e){J.setFieldValue("milestones",(0,i.Z)(J.values.milestones.filter((function(l,t){return t!==e}))))}(l)}})})]})]},l+1)})),(0,S.jsx)("span",{className:"cursor-pointer text-primary",onClick:function(){J.setFieldValue("milestones",[].concat((0,i.Z)(J.values.milestones),[{name:"",due_date:new Date}]))},children:"+ Add more milestone"})]})]}),(0,S.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,S.jsx)("button",{type:"button",onClick:W,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,S.jsx)("button",{disabled:!J.isValid,type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Submit"})]})]})})})})})}},25492:function(e,l,t){var i=t(93433),a=t(74165),n=t(1413),s=t(15861),d=t(29439),o=t(47313),r=t(79429),u=t(97931),c=t(27356),v=t(57406),m=t(21933),p=t(8094),x=t(95765),h=t(44758),g=t(47131),f=t(81676),j=t(57864),_=t(75486),b=t(31271),y=t(36059),Z=t(71158),N=t(40628),w=t(3379),T=t(96215),D=t(61171),F=t(2284),A=t(48475),S=t(82101),G=t(40086),E=t(46417);l.Z=function(e){var l,t,k,I=e.show,C=e.handleClose,V=e.rawData,M=(0,G.Z)().user,O=((0,N.Z)().organization.organization,(0,o.useState)({})),P=(0,d.Z)(O,2),L=(P[0],P[1],(0,Z.Z)().meeting_list),q=(0,b.Z)().toggleLoadingModal,U=w.j.useUpdateGoalMutation(),W=(0,d.Z)(U,1)[0],z=(0,r.TA)({initialValues:{title:null===V||void 0===V?void 0:V.title,details:"",due_date:"",start_date:"",assignee:null===V||void 0===V||null===(l=V.assignee)||void 0===l?void 0:l.email,goal_type:"INDIVIDUAL",meeting:"",milestones:[{is_completed:!1,name:"",due_date:""}]},validateOnChange:!0,validateOnBlur:!0,validationSchema:m.Ry().shape({title:m.Z_().label("Goal title").required(),milestones:m.IX().of(m.Ry({is_completed:m.O7().required(),name:m.Z_().label("Goal details").required(),due_date:m.hT().label("Due date").required()})).min(1,"at least add a amilestone").required(),details:m.Z_().label("Goal details").required(),assignee:m.Z_().label("Assignee").required(),due_date:m.hT().label("Due date").required(),goal_type:m.Z_().label("Goal details").required()}),onSubmit:function(){var e=(0,s.Z)((0,a.Z)().mark((function e(l){var t,i,s,d,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),t=K.find((function(e){return e.participant_email===l.assignee})),e.prev=2,e.next=5,W((0,n.Z)((0,n.Z)({},l),{},{id:null===V||void 0===V?void 0:V.id,assignee:null===t||void 0===t||null===(i=t.participant)||void 0===i?void 0:i._id})).unwrap();case 5:d=e.sent,C(),y.ZP.success(null===d||void 0===d?void 0:d.message),(0,A.T)({channel:S.vI.MEETING_SESSION_MODULE_UPDATE,data:{event:f.G9.GOAL,user_id:null===M||void 0===M?void 0:M.id,room_name:null===V||void 0===V||null===(s=V.meeting)||void 0===s?void 0:s._id}}),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),q(!1),y.ZP.error(null===e.t0||void 0===e.t0||null===(o=e.t0.data)||void 0===o?void 0:o.message);case 15:q(!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(l){return e.apply(this,arguments)}}()});function R(e){return function(){z.setFieldValue("milestones",(0,i.Z)(z.values.milestones.filter((function(l,t){return t!==e}))))}}(0,o.useEffect)((function(){var e,l,t;z.setFieldValue("title",null===V||void 0===V?void 0:V.title),z.setFieldValue("details",V.details),z.setFieldValue("goal_type",V.goal_type),z.setFieldValue("milestones",V.milestones),z.setFieldValue("meeting",null===(e=V.meeting)||void 0===e?void 0:e._id),z.setFieldValue("workspace",null===(l=V.workspace)||void 0===l?void 0:l._id),z.setFieldValue("assignee",null===V||void 0===V||null===(t=V.assignee)||void 0===t?void 0:t.email),z.setFieldValue("start_date",V.start_date||new Date),z.setFieldValue("due_date",V.due_date)}),[V]),console.log(z.errors,"asuifgougfuigasdiugfoaiugsdoifuagodsiugfoiausdf ");var B=D.W.useAttendeeListQuery(z.values.meeting,{skip:!z.values.meeting}),K=(0,o.useMemo)((function(){var e;return null===B||void 0===B||null===(e=B.data)||void 0===e?void 0:e.data}),[B]);return(0,E.jsx)("section",{children:(0,E.jsx)("article",{children:(0,E.jsx)(T.Z,{open:I,name:V.title,handleToggleDrawer:C,children:(0,E.jsx)("div",{className:"px-4",children:(0,E.jsxs)("form",{onSubmit:z.handleSubmit,children:[(0,E.jsx)("div",{children:(0,E.jsx)(c.Z,(0,n.Z)({type:"text",placeholder:"Enter title",value:null===(t=z.values)||void 0===t?void 0:t.title},(0,v.PW)(z,"title")))}),(0,E.jsx)("div",{className:"h-full mt-4 mb-2 overflow-hidden ",children:(0,E.jsx)(u.ML,{handleChange:function(e){return z.setFieldValue("details",e.replace(/<[^>]*>/g,""))},value:z.values.details||"",className:"w-full h-40",placeholder:"Goal details...."})}),(0,E.jsx)("div",{className:"w-full my-4",children:(0,E.jsx)(_.l,(0,n.Z)((0,n.Z)({placeholder:"Attach to meeting"},(0,v.PW)(z,"meeting")),{},{children:null===L||void 0===L?void 0:L.map((function(e){return(0,E.jsx)("option",{value:null===e||void 0===e?void 0:e.id,children:e.title},null===e||void 0===e?void 0:e.id)}))}))}),(0,E.jsx)("div",{className:"grid content-center grid-cols-1 gap-x-4",children:(0,E.jsx)(_.l,(0,n.Z)((0,n.Z)({placeholder:"Goal type"},(0,v.PW)(z,"goal_type")),{},{children:(0,E.jsx)("option",{value:f.P.INDIVIDUAL,children:"Individual"})}))}),(0,E.jsxs)("div",{className:"grid grid-cols-2 gap-4 py-4 ",children:[(0,E.jsx)(p.Z,{selected:z.values.start_date?new Date(z.values.start_date):new Date,placeholder:"Goal start date",error:z.errors.start_date,onSelect:function(e){return z.setFieldValue("start_date",e)}}),(0,E.jsx)(p.Z,{selected:z.values.due_date?new Date(z.values.due_date):new Date,placeholder:"Goal due date",error:z.errors.due_date,onSelect:function(e){return z.setFieldValue("due_date",e)}})]}),(0,E.jsx)("div",{className:"grid grid-cols-2 gap-4 py-4 ",children:(0,E.jsx)("div",{children:(0,E.jsx)(F.A,{size:"medium",defaultValue:"Assignee",placeholder:"Assignee",value:z.values.assignee,error:z.errors.assignee,onChange:function(e){z.setFieldValue("assignee",e.target.value)},children:null===K||void 0===K?void 0:K.map((function(e){return(0,E.jsx)(x.Z,{value:e.participant_email,children:e.participant_email},null===e||void 0===e?void 0:e._id)}))})})}),(0,E.jsxs)("div",{className:"mt-4",children:[(0,E.jsx)("label",{htmlFor:"Milestones",children:"Milestones"}),(0,E.jsxs)("div",{className:"py-4 ",children:[null===(k=z.values)||void 0===k?void 0:k.milestones.map((function(e,l){return(0,E.jsxs)("div",{className:"flex items-center justify-between mb-2 gap-2",children:[(0,E.jsxs)("div",{className:"basis-[10%] flex items-center ",children:[(0,E.jsx)("label",{children:"Done"}),(0,E.jsx)(h.Z,{checked:e.is_completed,onChange:function(e,t){return z.setFieldValue("milestones.".concat([l],".is_completed"),t)}})]}),(0,E.jsx)("div",{className:"basis-[45%]",children:(0,E.jsx)(c.Z,(0,n.Z)({showBreak:!1,type:"text",placeholder:"Enter title"},(0,v.PW)(z,"milestones.".concat([l],".name"))))}),(0,E.jsxs)("div",{className:"basis-[45%] flex items-center",children:[(0,E.jsx)(p.Z,{selected:z.values.milestones[l].due_date?new Date(z.values.milestones[l].due_date):new Date,placeholder:"Due date",onSelect:function(e){return z.setFieldValue("milestones.".concat([l],".due_date"),e)}}),(0,E.jsx)(g.Z,{children:(0,E.jsx)(j.SV5,{className:"text-red-600",onClick:R(l)})})]})]},l+1)})),(0,E.jsx)("span",{className:"cursor-pointer text-primary",onClick:function(){z.setFieldValue("milestones",[].concat((0,i.Z)(z.values.milestones),[{name:"",due_date:"",is_completed:!1}]))},children:"+ Add more milestone"})]})]}),(0,E.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,E.jsx)("button",{type:"button",onClick:C,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,E.jsx)("button",{disabled:!z.isValid,type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Update"})]})]})})})})})}},81628:function(e,l,t){t.r(l),t.d(l,{default:function(){return N}});var i=t(47313),a=t(40628),n=t(49579),s=t(40086),d=t(93433),o=t(29439),r=t(61689),u=t(19536),c=t(50567),v=t(50514),m=t(33532),p=t(71158),x=t(18754),h=t(38241),g=t(38707),f=t(25492),j=t(57406),_=t(91771),b=t(46417);function y(e){var l,t,a,n,s=e.data,y=e.showButton,Z=void 0===y||y,N=(0,i.useState)(!1),w=(0,o.Z)(N,2),T=w[0],D=w[1],F=(0,i.useState)(!1),A=(0,o.Z)(F,2),S=A[0],G=A[1],E=(0,p.Z)().meeting,k=(0,i.useMemo)((function(){(0,c.default)(new Date,(0,v.default)(null===s||void 0===s?void 0:s.due_date));var e=(null===s||void 0===s?void 0:s.milestones)||[],l=null===e||void 0===e?void 0:e.some((function(e){var l=(0,v.default)(null===e||void 0===e?void 0:e.due_date);return(0,m.default)(l,new Date)&&!(null!==e&&void 0!==e&&e.is_completed)})),t=null===e||void 0===e?void 0:e.some((function(e){var l=(0,v.default)(null===e||void 0===e?void 0:e.due_date);return console.log((0,m.default)(l,new Date)),(0,m.default)(l,new Date)&&(null===e||void 0===e?void 0:e.is_completed)}));console.log("=====>",t);null===e||void 0===e||e.some((function(e){return!e.is_completed}));var i=null===e||void 0===e?void 0:e.every((function(e){return e.is_completed})),a=l?"OFF TRACK":i?"DONE":"ON TRACK";return{key:a,color:"DONE"===a?"border-success text-success":"OFF TRACK"===a?"border-error text-[#FF0F00]":"ON TRACK"===a?"text-[#4685FF] border-primary":"text-gray-500 border-gray-900",colorText:"DONE"===a?"#09AF6A":"OFF TRACK"===a?"#FF0F00":"#4685FF",background:"DONE"===a?"border-success bg-[#09AF6A] text-white":"OFF TRACK"===a?"border-error text-white bg-[#FF0F00]":"ON TRACK"===a?"text-primary border-primary":"text-gray-500 border-gray-900"}}),[s]),I=null===s||void 0===s||null===(l=s.milestones)||void 0===l?void 0:l.filter((function(e){return null===e||void 0===e?void 0:e.is_completed})),C=I.length/(null===s||void 0===s||null===(t=s.milestones)||void 0===t?void 0:t.length)*100;(0,v.default)(s.start_date),(0,v.default)(s.due_date);var V=null===(a=function(e){var l=null===e||void 0===e?void 0:e.map((function(e){return new Date(null===e||void 0===e?void 0:e.due_date)})),t=new Date(Math.min.apply(Math,(0,d.Z)(l.map((function(e){return e.getTime()}))))),i=new Date(Math.max.apply(Math,(0,d.Z)(l.map((function(e){return e.getTime()}))))).getTime()-t.getTime();return e.map((function(e){var l=new Date(null===e||void 0===e?void 0:e.due_date),a=((null===l||void 0===l?void 0:l.getTime())-t.getTime())/i*100;return Math.round(a)}))}((0,d.Z)(null===s||void 0===s?void 0:s.milestones)))||void 0===a?void 0:a.sort((function(e,l){return e-l}));(0,j.Aw)(new Date(null===s||void 0===s?void 0:s.created_at),new Date(null===s||void 0===s?void 0:s.due_date));return(0,b.jsxs)("div",{className:"w-full px-6 pb-4 bg-white h-fit rounded-2xl",children:[(0,b.jsxs)("div",{className:"flex flex-row justify-between py-4 text-base font-extrabold ",children:[(0,b.jsx)("div",{className:"flex flex-row items-center gap-x-4",children:(0,b.jsx)(r.Z,{title:"Percentage of milestone completed",placement:"top",children:(0,b.jsx)("p",{className:"py-1.5 px-3 text-sm rounded-md text-primary-light bg-[#E5E7F4] capitalize",children:k.key.toLocaleLowerCase()})})}),Z?(0,b.jsx)(r.Z,{title:"".concat(I.length," milestone completed"),placement:"top",children:(0,b.jsxs)("span",{className:"inline-block text-gray-400 font-normal text-[15.5px]",children:["".concat((null===I||void 0===I?void 0:I.length)||0,"/").concat((null===s||void 0===s||null===(n=s.milestones)||void 0===n?void 0:n.length)||0," "),"Completed"]})}):null]}),(0,b.jsx)("div",{className:"pb-3 cursor-pointer",onClick:function(){G(!0)},children:(0,b.jsx)("h4",{className:"font-normal text-[15.5px]",children:null===s||void 0===s?void 0:s.title})}),(0,b.jsx)(u.Z,{}),(0,b.jsxs)("div",{className:"flex items-center justify-between w-full h-16",children:[(0,b.jsxs)("div",{className:"flex flex-row items-center flex-1 gap-x-2",children:[(0,b.jsx)(x.Z,{normalizedGoalStatusEnum:k,milestoneWithPercentage:V}),100===C?(0,b.jsx)("img",{src:_.Z,className:"ml-3",alt:"completed"}):(0,b.jsxs)("p",{className:" mx-2 text-sm  justify-center items-center rounded-md ".concat(k.color),children:[Math.round(C||0),"%"]})]}),Z?(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsx)(h.Z,{data:E})}):null]}),T?(0,b.jsx)(g.Z,{show:T,handleToggleGoal:function(e){D((function(e){return e}))},itemData:s}):null,S&&(0,b.jsx)(f.Z,{show:S,rawData:s,handleClose:function(){G(!1)}})]})}var Z=t(66838),N=function(e){e.data,e.meeting,e.showButton;var l=(0,s.Z)().user,t=(0,a.Z)().organization.organization,d=n.N.useFetchUserGoalQuery({organization:null===t||void 0===t?void 0:t._id,assignee:null===l||void 0===l?void 0:l.id}),o=(0,i.useMemo)((function(){var e;return null===d||void 0===d||null===(e=d.currentData)||void 0===e?void 0:e.data}),[d]);return(0,b.jsx)("section",{children:(0,b.jsx)(Z.s,{isLoading:d.isLoading||d.isFetching,children:(0,b.jsx)("article",{className:"flex flex-col gap-y-4",children:null===o||void 0===o?void 0:o.map((function(e){return(0,b.jsx)("div",{children:(0,b.jsx)(y,{data:e})},e.id)}))})})})}},49579:function(e,l,t){t.d(l,{N:function(){return s}});var i=t(20905),a=t(84537),n=t(22482),s=i.Te.injectEndpoints({endpoints:function(e){return{fetchUserActionItem:e.query({query:function(e){return{url:a.A.ACTION_ITEMS,method:"GET",params:e}},invalidatesTags:[{type:n.Z.ACTION_ITEM}]}),deleteActionItem:e.mutation({query:function(e){return{url:"".concat(a.A.ACTION_ITEMS,"/").concat(e),method:"DELETE"}},invalidatesTags:[{type:n.Z.ACTION_ITEM}]}),fetchUserGoal:e.query({query:function(e){return{url:a.A.GOALS,method:"GET",params:e}},providesTags:[{type:n.Z.GOAL}]}),fetchAllIssues:e.query({query:function(e){return{url:"".concat(a.A.ISSUES),method:"GET",params:e}},providesTags:[{type:n.Z.ISSUES},{type:n.Z.MEETINGS}]})}}})}}]);