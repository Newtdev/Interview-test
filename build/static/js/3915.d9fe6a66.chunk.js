"use strict";(self.webpackChunkkrext=self.webpackChunkkrext||[]).push([[3915],{61625:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var a=n(74165),t=n(15861),i=n(29439),o=n(47313),l=n(47131),s=n(89434),d=n(60386),u=n(40628),c=n(31271),m=n(36059),f=n(68309),v=n(45798),p=n(9439),h=n(97763),Z=n(96215),x=n(1413),b=n(79429),g=n(21933),y=n(27356),j=n(57406),w=n(1550),S=n(23306),k=n(78846),N=n(95765),z=n(81676),_=n(46417),W=function(e){var r,n=e.handleDrawer,o=(0,c.Z)().toggleLoadingModal,l=p.$.useInviteOrganizationUserMutation(),s=(0,i.Z)(l,2),d=s[0],f=s[1],v=(0,u.Z)().organization.organization,h=(0,b.TA)({initialValues:{role:""},validationSchema:g.Ry().shape({email:g.Z_().label("Email").email().required(),role:g.Z_().label("ROLE").oneOf(Object.values(z.rm)).required(),bio_data:g.Ry({first_name:g.Z_().label("Last Name").optional(),last_name:g.Z_().label("First Name").optional()}).optional()}),validateOnBlur:!0,validateOnChange:!0,onSubmit:function(){var e=(0,t.Z)((0,a.Z)().mark((function e(r){var t,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,d((0,x.Z)((0,x.Z)({},r),{},{organization:null===v||void 0===v?void 0:v._id})).unwrap();case 4:t=e.sent,n(),m.ZP.success(null===t||void 0===t?void 0:t.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),o(!1),m.ZP.error(null===e.t0||void 0===e.t0||null===(i=e.t0.data)||void 0===i?void 0:i.message);case 13:o(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}()});return(0,_.jsxs)("form",{className:"p-4",onSubmit:h.handleSubmit,children:[(0,_.jsx)(y.Z,(0,x.Z)({type:"text",placeholder:"First name (Optional)"},(0,j.PW)(h,"bio_data.first_name"))),(0,_.jsx)(y.Z,(0,x.Z)({type:"test",placeholder:"Last name (Optional)"},(0,j.PW)(h,"bio_data.last_name"))),(0,_.jsx)(y.Z,(0,x.Z)({type:"email",placeholder:"Email"},(0,j.PW)(h,"email"))),(0,_.jsxs)("div",{className:"my-7",children:[(0,_.jsxs)(w.Z,{fullWidth:!0,className:"my-6",children:[(0,_.jsx)(S.Z,{id:"organisation-role",children:"ROLE"}),(0,_.jsx)(k.Z,(0,x.Z)((0,x.Z)({labelId:"organisation-role",id:"organisation-role",label:"ROLE"},(0,j.PW)(h,"role")),{},{children:Object.values(z.rm).map((function(e){var r;return(0,_.jsx)(N.Z,{value:e,children:null===e||void 0===e||null===(r=e.split("_"))||void 0===r?void 0:r.join(" ")})}))}))]}),(0,_.jsx)("span",{className:"text-error text-[12px]",children:null===h||void 0===h||null===(r=h.errors)||void 0===r?void 0:r.role})]}),(0,_.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,_.jsx)("button",{type:"button",onClick:n,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,_.jsx)("button",{disabled:!(null===f||void 0===f||!f.isLoading),type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Submit"})]})]})},L=function(e){var r=e.handleDrawer,n=e.user,l=(0,c.Z)().toggleLoadingModal,s=p.$.useUpdateUserRoleMutation(),d=(0,i.Z)(s,2),f=d[0],v=d[1],h=(0,u.Z)().organization.organization,Z=(0,b.TA)({initialValues:{role:""},validationSchema:g.Ry().shape({user:g.Ry({email:g.Z_().label("Email").email().required(),bio_data:g.Ry({first_name:g.Z_().label("Last Name").optional(),last_name:g.Z_().label("First Name").optional()}).optional()}).required()}),validateOnBlur:!0,validateOnChange:!0,onSubmit:function(){var e=(0,t.Z)((0,a.Z)().mark((function e(n){var t,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,e.next=4,f({organization:null===h||void 0===h?void 0:h._id,id:null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t._id,body:{role:null===n||void 0===n?void 0:n.role}}).unwrap();case 4:i=e.sent,r(),m.ZP.success(null===i||void 0===i?void 0:i.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),l(!1),m.ZP.error(null===e.t0||void 0===e.t0||null===(o=e.t0.data)||void 0===o?void 0:o.message);case 13:l(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}()});return(0,o.useEffect)((function(){Z.setValues(n)}),[n]),(0,_.jsxs)("form",{className:"p-4",onSubmit:Z.handleSubmit,children:[(0,_.jsx)(y.Z,(0,x.Z)({type:"text",placeholder:"First name",enable:!0},(0,j.PW)(Z,"user.bio_data.first_name"))),(0,_.jsx)(y.Z,(0,x.Z)({type:"test",placeholder:"Last name"},(0,j.PW)(Z,"user.bio_data.last_name"))),(0,_.jsx)(y.Z,(0,x.Z)({type:"email",placeholder:"Email"},(0,j.PW)(Z,"user.email"))),(0,_.jsx)("div",{className:"my-7",children:(0,_.jsxs)(w.Z,{fullWidth:!0,className:"my-6",children:[(0,_.jsx)(S.Z,{id:"organisation-role",children:"ROLE"}),(0,_.jsx)(k.Z,(0,x.Z)((0,x.Z)({labelId:"organisation-role",id:"organisation-role",label:"ROLE"},(0,j.PW)(Z,"role")),{},{children:Object.values(z.rm).map((function(e){var r;return(0,_.jsx)(N.Z,{value:e,children:null===e||void 0===e||null===(r=e.split("_"))||void 0===r?void 0:r.join(" ")})}))}))]})}),(0,_.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,_.jsx)("button",{type:"button",onClick:r,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,_.jsx)("button",{disabled:!(null===v||void 0===v||!v.isLoading),type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Submit"})]})]})},O=n(94143);var C=function(){var e=(0,o.useState)(!1),r=(0,i.Z)(e,2),n=r[0],x=r[1],b=(0,o.useState)(!1),g=(0,i.Z)(b,2),y=g[0],w=g[1],S=(0,o.useState)({}),k=(0,i.Z)(S,2),N=k[0],C=k[1],M=(0,c.Z)().toggleLoadingModal,P=(0,u.Z)().organization.organization,R=(0,o.useState)(!1),E=(0,i.Z)(R,2),F=E[0],q=E[1],A=p.$.useGetOrganizationUsersQuery({organization:P._id}),I=(0,o.useMemo)((function(){var e;return null===A||void 0===A||null===(e=A.data)||void 0===e?void 0:e.data}),[A]),D=p.$.useRemoveOrganizationUsersMutation(),U=(0,i.Z)(D,1)[0],T=(0,o.useMemo)((function(){return[{header:"Email",accessorKey:"user.email"},{header:"Role",accessorKey:"role",minSize:100,maxSize:300,cell:function(e){var r,n,a,t=e.row;return(0,_.jsx)("div",{className:"text-left",children:(0,j.fm)("".concat(null===t||void 0===t||null===(r=t.original)||void 0===r||null===(n=r.role)||void 0===n||null===(a=n.replace("_"," "))||void 0===a?void 0:a.toString()))})}},{header:"Added on",accessorKey:"created_at",accessorFn:function(e){return(0,s.default)(new Date(null===e||void 0===e?void 0:e.created_at),"dd/MM/yyyy")}},{header:"Status",accessorKey:"status",size:100,cell:function(e){var r,n,a=e.row;return(0,_.jsx)("div",{className:"text-center",children:(0,j.fm)(null===a||void 0===a||null===(r=a.original)||void 0===r||null===(n=r.status)||void 0===n?void 0:n.replace("_"," "))})}},{header:"",accessorKey:"button",cell:function(e){var r,n=e.row;return(0,_.jsx)("div",{className:"flex justify-end gap-x-4 ",id:null===n||void 0===n||null===(r=n.original)||void 0===r?void 0:r.id,children:n.original.role!==z.rm.OWNER?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("button",{type:"button",className:"flex items-center justify-center p-2 text-sm font-bold ease-linear delay-100 bg-white border rounded-lg text-primary-dark border-primary-dark hover:bg-blue-800 hover:text-white",onClick:function(){C(n.original),w(!0)},children:"View"}),(0,_.jsx)(l.Z,{onClick:function(){x(!0),C(n.original.user)},children:(0,_.jsx)(f.pJ,{})})]}):null})}}]}),[]);function B(){q((function(e){return!e}))}function K(){return(K=(0,t.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,U({organization:P._id,id:null===N||void 0===N?void 0:N._id}).unwrap();case 4:r=e.sent,x(!1),m.ZP.success(r.message),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),M(!1),m.ZP.error(e.t0.message);case 13:M(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var V=(0,d.Z)({columns:T,data:I});return(0,_.jsxs)("section",{children:[(0,_.jsx)("div",{className:"flex justify-end w-full ",children:(0,_.jsx)(h.Z,{name:"Add Users",onClick:B})}),(0,_.jsx)("div",{className:"w-full p-3 rounded ",children:(0,_.jsx)(v.Z,{instance:V,loading:A.isFetching,error:A.isError,onRetry:A.refetch})}),(0,_.jsx)(O.Z,{title:"Delete",description:"Are you sure you want to delete this user?",isOpen:n,closeModal:function(){x(!1)},handleAction:function(){!function(){K.apply(this,arguments)}()}}),F?(0,_.jsx)(Z.Z,{open:F,handleToggleDrawer:B,name:"Add User To Organisation",children:(0,_.jsx)(W,{handleDrawer:B})}):null,y?(0,_.jsx)(Z.Z,{open:y,handleToggleDrawer:function(){w(!1)},name:"User Profile",children:(0,_.jsx)(L,{user:N,handleDrawer:function(){w(!1)}})}):null]})}},1550:function(e,r,n){n.d(r,{Z:function(){return y}});var a=n(29439),t=n(63366),i=n(87462),o=n(47313),l=n(94146),s=n(8007),d=n(77342),u=n(17592),c=n(96837),m=n(91615),f=n(92537),v=n(91397),p=n(14363),h=n(1167);function Z(e){return(0,h.ZP)("MuiFormControl",e)}(0,p.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var x=n(46417),b=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],g=(0,u.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(e,r){var n=e.ownerState;return(0,i.Z)({},r.root,r["margin".concat((0,m.Z)(n.margin))],n.fullWidth&&r.fullWidth)}})((function(e){var r=e.ownerState;return(0,i.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===r.margin&&{marginTop:16,marginBottom:8},"dense"===r.margin&&{marginTop:8,marginBottom:4},r.fullWidth&&{width:"100%"})})),y=o.forwardRef((function(e,r){var n=(0,d.Z)({props:e,name:"MuiFormControl"}),u=n.children,p=n.className,h=n.color,y=void 0===h?"primary":h,j=n.component,w=void 0===j?"div":j,S=n.disabled,k=void 0!==S&&S,N=n.error,z=void 0!==N&&N,_=n.focused,W=n.fullWidth,L=void 0!==W&&W,O=n.hiddenLabel,C=void 0!==O&&O,M=n.margin,P=void 0===M?"none":M,R=n.required,E=void 0!==R&&R,F=n.size,q=void 0===F?"medium":F,A=n.variant,I=void 0===A?"outlined":A,D=(0,t.Z)(n,b),U=(0,i.Z)({},n,{color:y,component:w,disabled:k,error:z,fullWidth:L,hiddenLabel:C,margin:P,required:E,size:q,variant:I}),T=function(e){var r=e.classes,n=e.margin,a=e.fullWidth,t={root:["root","none"!==n&&"margin".concat((0,m.Z)(n)),a&&"fullWidth"]};return(0,s.Z)(t,Z,r)}(U),B=o.useState((function(){var e=!1;return u&&o.Children.forEach(u,(function(r){if((0,f.Z)(r,["Input","Select"])){var n=(0,f.Z)(r,["Select"])?r.props.input:r;n&&(0,c.B7)(n.props)&&(e=!0)}})),e})),K=(0,a.Z)(B,2),V=K[0],$=K[1],G=o.useState((function(){var e=!1;return u&&o.Children.forEach(u,(function(r){(0,f.Z)(r,["Input","Select"])&&((0,c.vd)(r.props,!0)||(0,c.vd)(r.props.inputProps,!0))&&(e=!0)})),e})),H=(0,a.Z)(G,2),J=H[0],Q=H[1],X=o.useState(!1),Y=(0,a.Z)(X,2),ee=Y[0],re=Y[1];k&&ee&&re(!1);var ne,ae=void 0===_||k?ee:_,te=o.useMemo((function(){return{adornedStart:V,setAdornedStart:$,color:y,disabled:k,error:z,filled:J,focused:ae,fullWidth:L,hiddenLabel:C,size:q,onBlur:function(){re(!1)},onEmpty:function(){Q(!1)},onFilled:function(){Q(!0)},onFocus:function(){re(!0)},registerEffect:ne,required:E,variant:I}}),[V,y,k,z,J,ae,L,C,ne,E,q,I]);return(0,x.jsx)(v.Z.Provider,{value:te,children:(0,x.jsx)(g,(0,i.Z)({as:w,ownerState:U,className:(0,l.Z)(T.root,p),ref:r},D,{children:u}))})}))},23306:function(e,r,n){n.d(r,{Z:function(){return N}});var a=n(4942),t=n(63366),i=n(87462),o=n(47313),l=n(8007),s=n(94146),d=n(80300),u=n(99008),c=n(91615),m=n(77342),f=n(17592),v=n(14363),p=n(1167);function h(e){return(0,p.ZP)("MuiFormLabel",e)}var Z=(0,v.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),x=n(46417),b=["children","className","color","component","disabled","error","filled","focused","required"],g=(0,f.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(e,r){var n=e.ownerState;return(0,i.Z)({},r.root,"secondary"===n.color&&r.colorSecondary,n.filled&&r.filled)}})((function(e){var r,n=e.theme,t=e.ownerState;return(0,i.Z)({color:(n.vars||n).palette.text.secondary},n.typography.body1,(r={lineHeight:"1.4375em",padding:0,position:"relative"},(0,a.Z)(r,"&.".concat(Z.focused),{color:(n.vars||n).palette[t.color].main}),(0,a.Z)(r,"&.".concat(Z.disabled),{color:(n.vars||n).palette.text.disabled}),(0,a.Z)(r,"&.".concat(Z.error),{color:(n.vars||n).palette.error.main}),r))})),y=(0,f.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(e,r){return r.asterisk}})((function(e){var r=e.theme;return(0,a.Z)({},"&.".concat(Z.error),{color:(r.vars||r).palette.error.main})})),j=o.forwardRef((function(e,r){var n=(0,m.Z)({props:e,name:"MuiFormLabel"}),a=n.children,o=n.className,f=n.component,v=void 0===f?"label":f,p=(0,t.Z)(n,b),Z=(0,u.Z)(),j=(0,d.Z)({props:n,muiFormControl:Z,states:["color","required","focused","disabled","error","filled"]}),w=(0,i.Z)({},n,{color:j.color||"primary",component:v,disabled:j.disabled,error:j.error,filled:j.filled,focused:j.focused,required:j.required}),S=function(e){var r=e.classes,n=e.color,a=e.focused,t=e.disabled,i=e.error,o=e.filled,s=e.required,d={root:["root","color".concat((0,c.Z)(n)),t&&"disabled",i&&"error",o&&"filled",a&&"focused",s&&"required"],asterisk:["asterisk",i&&"error"]};return(0,l.Z)(d,h,r)}(w);return(0,x.jsxs)(g,(0,i.Z)({as:v,ownerState:w,className:(0,s.Z)(S.root,o),ref:r},p,{children:[a,j.required&&(0,x.jsxs)(y,{ownerState:w,"aria-hidden":!0,className:S.asterisk,children:["\u2009","*"]})]}))}));function w(e){return(0,p.ZP)("MuiInputLabel",e)}(0,v.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var S=["disableAnimation","margin","shrink","variant","className"],k=(0,f.ZP)(j,{shouldForwardProp:function(e){return(0,f.FO)(e)||"classes"===e},name:"MuiInputLabel",slot:"Root",overridesResolver:function(e,r){var n=e.ownerState;return[(0,a.Z)({},"& .".concat(Z.asterisk),r.asterisk),r.root,n.formControl&&r.formControl,"small"===n.size&&r.sizeSmall,n.shrink&&r.shrink,!n.disableAnimation&&r.animated,n.focused&&r.focused,r[n.variant]]}})((function(e){var r=e.theme,n=e.ownerState;return(0,i.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},n.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===n.size&&{transform:"translate(0, 17px) scale(1)"},n.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!n.disableAnimation&&{transition:r.transitions.create(["color","transform","max-width"],{duration:r.transitions.duration.shorter,easing:r.transitions.easing.easeOut})},"filled"===n.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(12px, 13px) scale(1)"},n.shrink&&(0,i.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===n.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===n.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===n.size&&{transform:"translate(14px, 9px) scale(1)"},n.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))})),N=o.forwardRef((function(e,r){var n=(0,m.Z)({name:"MuiInputLabel",props:e}),a=n.disableAnimation,o=void 0!==a&&a,f=n.shrink,v=n.className,p=(0,t.Z)(n,S),h=(0,u.Z)(),Z=f;"undefined"===typeof Z&&h&&(Z=h.filled||h.focused||h.adornedStart);var b=(0,d.Z)({props:n,muiFormControl:h,states:["size","variant","required","focused"]}),g=(0,i.Z)({},n,{disableAnimation:o,formControl:h,shrink:Z,size:b.size,variant:b.variant,required:b.required,focused:b.focused}),y=function(e){var r=e.classes,n=e.formControl,a=e.size,t=e.shrink,o=e.disableAnimation,s=e.variant,d=e.required,u={root:["root",n&&"formControl",!o&&"animated",t&&"shrink",a&&"normal"!==a&&"size".concat((0,c.Z)(a)),s],asterisk:[d&&"asterisk"]},m=(0,l.Z)(u,w,r);return(0,i.Z)({},r,m)}(g);return(0,x.jsx)(k,(0,i.Z)({"data-shrink":Z,ownerState:g,ref:r,className:(0,s.Z)(y.root,v)},p,{classes:y}))}))},85038:function(e,r,n){var a=n(54792);r.Z=a.Z},92537:function(e,r,n){n.d(r,{Z:function(){return t}});var a=n(47313);var t=function(e,r){var n,t;return a.isValidElement(e)&&-1!==r.indexOf(null!=(n=e.type.muiName)?n:null==(t=e.type)||null==(t=t._payload)||null==(t=t.value)?void 0:t.muiName)}}}]);