"use strict";(self.webpackChunkkrext=self.webpackChunkkrext||[]).push([[1876],{55824:function(e,n,i){i.r(n),i.d(n,{default:function(){return Z}});var t=i(74165),r=i(15861),o=i(29439),a=i(47313),l=i(6524),s=i(45798),u=i(60386),d=i(71158),c=i(31271),v=i(36059),f=i(61171),p=i(94143),m=i(68309),x=i(81676),h=i(46417);function Z(){var e=(0,d.Z)().new_meeting,n=(0,a.useState)(!1),i=(0,o.Z)(n,2),Z=i[0],g=i[1],w=(0,a.useState)(!1),b=(0,o.Z)(w,2),j=b[0],M=b[1],S=(0,a.useState)(),k=(0,o.Z)(S,2),y=k[0],z=k[1],E=(0,c.Z)().toggleLoadingModal,N=f.W.useDeleteMeetingAttendeeMutation(),A=(0,o.Z)(N,1)[0],R=f.W.useUpdateMeetingAttendeeMutation(),_=(0,o.Z)(R,1)[0],D=(0,a.useRef)();function B(){g((function(e){return!e}))}var C=function(){var n=(0,r.Z)((0,t.Z)().mark((function n(){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return B(),E(!0),n.prev=2,n.next=5,A({meeting:e.id,participant:null===y||void 0===y?void 0:y.id}).unwrap();case 5:i=n.sent,v.ZP.success(null===i||void 0===i?void 0:i.message),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),v.ZP.error(null===n.t0||void 0===n.t0?void 0:n.t0.message);case 12:E(!1);case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(){return n.apply(this,arguments)}}(),L=function(){var n=(0,r.Z)((0,t.Z)().mark((function n(){var i,r;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return M(!1),E(!0),n.prev=2,n.next=5,_({meeting:null===e||void 0===e?void 0:e.id,participant:null===y||void 0===y?void 0:y.id,body:{role:y.role===x.Z3.MEMBER?x.Z3.HOST:x.Z3.MEMBER,meeting:null===y||void 0===y?void 0:y.meeting}}).unwrap();case 5:i=n.sent,v.ZP.success(null===i||void 0===i?void 0:i.message),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),v.ZP.error(null===n.t0||void 0===n.t0||null===(r=n.t0.data)||void 0===r?void 0:r.message);case 12:E(!1);case 13:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(){return n.apply(this,arguments)}}(),O=(0,a.useMemo)((function(){return[{header:"First name",minSize:50,maxSize:150,cell:function(e){var n,i,t,r=e.row;return"".concat((null===r||void 0===r||null===(n=r.original)||void 0===n||null===(i=n.participant)||void 0===i||null===(t=i.bio_data)||void 0===t?void 0:t.first_name)||"-----")}},{header:"Last name",minSize:50,maxSize:150,cell:function(e){var n,i,t,r=e.row;return"".concat((null===r||void 0===r||null===(n=r.original)||void 0===n||null===(i=n.participant)||void 0===i||null===(t=i.bio_data)||void 0===t?void 0:t.last_name)||"-----")}},{header:"Email",minSize:100,maxSize:300,cell:function(e){var n,i=e.row;return(0,h.jsx)("div",{className:"text-center",children:(null===i||void 0===i||null===(n=i.original)||void 0===n?void 0:n.participant_email)||"-----"})}},{header:"Role",minSize:50,maxSize:100,cell:function(e){var n,i=e.row;return(0,h.jsx)("div",{className:"text-center",children:(null===i||void 0===i||null===(n=i.original)||void 0===n?void 0:n.role)||"-----"})}},{header:function(){return""},accessorKey:"button",align:"center",minSize:50,maxSize:400,cell:function(e){var n,i=e.row;return(0,h.jsxs)("div",{className:"flex flex-row space-x-4 text-center",ref:D,id:null===i||void 0===i||null===(n=i.original)||void 0===n?void 0:n.id,children:[(0,h.jsxs)("button",{className:"border rounded-md border-primary",onClick:function(e){e.preventDefault(),z(i.original),M(!0)},children:[(0,h.jsx)("span",{children:"Make"}),(0,h.jsxs)("span",{className:"font-bold text-primary",children:[" "," ",i.original.role===x.Z3.MEMBER?x.Z3.HOST:x.Z3.MEMBER]})]}),(0,h.jsx)("button",{onClick:function(e){e.preventDefault(),z(i.original),g(!0)},children:(0,h.jsx)(m.pJ,{})})]})}}]}),[]),P=f.W.useAttendeeListQuery(null===e||void 0===e?void 0:e.id,{skip:!(null!==e&&void 0!==e&&e.id)}),W=(0,a.useMemo)((function(){var e;return null===P||void 0===P||null===(e=P.currentData)||void 0===e?void 0:e.data}),[P]),F=(0,u.Z)({columns:O,data:W});return(0,h.jsxs)("section",{className:"w-full ",children:[(0,h.jsx)(l.Z,{name:"Attendees List",children:(0,h.jsx)("div",{className:"w-full",children:(0,h.jsx)(s.Z,{instance:F,loading:P.isFetching,error:P.isError,onRetry:P.refetch})})}),Z&&(0,h.jsx)(p.Z,{title:"Delete",description:"Are you sure you want to delete this attendee from this meeting?",isOpen:Z,closeModal:function(){B()},handleAction:function(){C()}}),j&&(0,h.jsx)(p.Z,{title:"Update Role",description:"Are you sure you want to update this attendee role?",isOpen:j,closeModal:function(){M(!1)},handleAction:function(){L()}})]})}},6524:function(e,n,i){i.d(n,{Z:function(){return r}});var t=i(46417);function r(e){var n=e.name,i=e.children,r=e.options;return(0,t.jsxs)("div",{className:"w-full px-6 pb-4 bg-white shadow h-fit rounded-2xl",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center py-6 text-base font-bold border-b",children:[(0,t.jsx)("h4",{children:n}),(0,t.jsx)("div",{children:r})]}),i]})}}}]);