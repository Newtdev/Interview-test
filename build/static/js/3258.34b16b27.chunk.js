"use strict";(self.webpackChunkkrext=self.webpackChunkkrext||[]).push([[3258],{79455:function(e,n,r){r.r(n),r.d(n,{default:function(){return N}});var t=r(74165),i=r(15861),o=r(29439),l=r(47131),a=r(68309),u=r(45798),s=r(1413),d=r(31271),c=r(79429),v=r(36059),f=r(57406),p=r(78846),m=r(95765),h=r(79147),x=r(46417),Z=function(e){var n=e.user,r=e.workspace,l=e.handleDrawer,a=(0,d.Z)().toggleLoadingModal,u=h.x.useUpdateWorkspaceUserRoleMutation(),Z=(0,o.Z)(u,1)[0],g=(0,c.TA)({initialValues:{user_role:null===n||void 0===n?void 0:n.user_role},validateOnBlur:!0,validateOnChange:!0,onSubmit:function(){var e=(0,i.Z)((0,t.Z)().mark((function e(i){var o,u;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,Z((0,s.Z)((0,s.Z)({},i),{},{user:null===n||void 0===n?void 0:n.id,workspace:null===r||void 0===r?void 0:r.id})).unwrap();case 4:o=e.sent,l(),v.ZP.success(null===o||void 0===o?void 0:o.message),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),a(!1),console.log(e.t0),v.ZP.error(null===e.t0||void 0===e.t0||null===(u=e.t0.data)||void 0===u?void 0:u.message);case 14:a(!1);case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n){return e.apply(this,arguments)}}()});return(0,x.jsxs)("form",{className:"p-4",onSubmit:g.handleSubmit,children:[(0,x.jsx)("div",{children:(0,x.jsxs)(p.Z,(0,s.Z)((0,s.Z)({fullWidth:!0,className:"mt-6 border focus:border-gray-dark"},(0,f.PW)(g,"user_role")),{},{children:[(0,x.jsx)(m.Z,{value:"ADMIN",children:"Workspace Admin"}),(0,x.jsx)(m.Z,{value:"MEMBER",children:"Member"})]}))}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-x-4",children:[(0,x.jsx)("button",{type:"button",onClick:l,className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base ease-linear delay-100 border rounded-lg text-primary border-primary hover:bg-blue-800 hover:text-white",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",className:"flex items-center justify-center w-full px-3 py-4 mt-12 mb-3 text-base text-white ease-linear delay-100 rounded-lg bg-primary hover:bg-blue-800",children:"Submit"})]})]})},g=r(89434),y=r(60386),b=r(44922),k=r(68859),w=r(47313),j=r(58821),M=r(58467),_=r(96215);function N(){var e=(0,b.Z)().workspace,n=(0,w.useState)(!1),r=(0,o.Z)(n,2),s=r[0],c=r[1],f=(0,w.useState)(!1),p=(0,o.Z)(f,2),m=(p[0],p[1],(0,w.useState)({})),N=(0,o.Z)(m,2),S=N[0],C=N[1],D=(0,d.Z)().toggleLoadingModal,E=h.x.useDeleteWorkspaceUserMutation(),W=(0,o.Z)(E,1)[0],A=((0,M.s0)(),h.x.useSingleWorkspaceQuery({id:null===e||void 0===e?void 0:e.id},{skip:!(null!==e&&void 0!==e&&e.id)})),O=(0,w.useMemo)((function(){var e,n;return null===A||void 0===A||null===(e=A.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.users}),[A]),P=(0,w.useState)(!1),R=(0,o.Z)(P,2),F=R[0],K=R[1],U=(0,w.useMemo)((function(){return[{header:"Name",cell:function(e){var n,r,t,i,o,l,a=e.row;return"".concat((null===a||void 0===a||null===(n=a.original)||void 0===n||null===(r=n.user)||void 0===r||null===(t=r.bio_data)||void 0===t?void 0:t.first_name)||"-----"," ").concat((null===a||void 0===a||null===(i=a.original)||void 0===i||null===(o=i.user)||void 0===o||null===(l=o.bio_data)||void 0===l?void 0:l.last_name)||"-----")}},{header:"Email",accessorKey:"email",accessorFn:function(e){var n,r;return null!==e&&void 0!==e&&null!==(n=e.user)&&void 0!==n&&n.email?"".concat(null===e||void 0===e||null===(r=e.user)||void 0===r?void 0:r.email):"-------------------"}},{header:"Created On",accessorKey:"created_at",accessorFn:function(e){var n;return(0,g.default)(new Date(null===e||void 0===e||null===(n=e.user)||void 0===n?void 0:n.created_at),"dd/MM/yyyy hh:mm a")}},{header:"Role",accessorKey:"role",accessorFn:function(e){return console.log(e,"Data"),"".concat(null===e||void 0===e?void 0:e.user_role)}},{header:"",accessorKey:"button",cell:function(e){var n,r=e.row;return(0,x.jsxs)("div",{className:"flex justify-end gap-x-6 ",id:null===r||void 0===r||null===(n=r.original)||void 0===n?void 0:n.id,children:[(0,x.jsx)(l.Z,{onClick:function(){return e=null===r||void 0===r?void 0:r.original,c((function(e){return!e})),void C((function(){return e||{}}));var e},children:(0,x.jsx)(j.jox,{})}),(0,x.jsx)(l.Z,{onClick:B,children:(0,x.jsx)(a.pJ,{})})]})}}]}),[]);function B(e){K((function(e){return!e})),C((function(){return e||{}}))}function L(){return(L=(0,i.Z)((0,t.Z)().mark((function n(r){var i;return(0,t.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return D(!0),n.prev=1,n.next=4,W({user:null===r||void 0===r?void 0:r.id,workspace:null===e||void 0===e?void 0:e.id}).unwrap();case 4:i=n.sent,D(!1),K((function(e){return!e})),v.ZP.success(i.message),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(1),D(!1),v.ZP.error(n.t0.message);case 14:case"end":return n.stop()}}),n,null,[[1,10]])})))).apply(this,arguments)}function T(e){c((function(e){return!e})),C((function(){return e||{}}))}var V=(0,y.Z)({columns:U,data:O});return(0,x.jsxs)("div",{children:[(0,x.jsx)(k.Z,{header:"Delete",description:"Are you sure you want to delete user?",isOpen:F,closeModal:function(){K((function(e){return!e}))},handleAction:function(){!function(e){L.apply(this,arguments)}(S)}}),(0,x.jsx)(u.Z,{instance:V,loading:A.isFetching,error:A.isError,onRetry:A.refetch}),(0,x.jsx)(_.Z,{open:s,handleToggleDrawer:T,name:"Edit User Role",children:(0,x.jsx)(Z,{workspace:e,user:S||{},handleDrawer:T})})]})}},85038:function(e,n,r){var t=r(54792);n.Z=t.Z},92537:function(e,n,r){r.d(n,{Z:function(){return i}});var t=r(47313);var i=function(e,n){var r,i;return t.isValidElement(e)&&-1!==n.indexOf(null!=(r=e.type.muiName)?r:null==(i=e.type)||null==(i=i._payload)||null==(i=i.value)?void 0:i.muiName)}}}]);